var V=Object.defineProperty;var h=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var k=(o,n,l)=>n in o?V(o,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[n]=l,S=(o,n)=>{for(var l in n||(n={}))$.call(n,l)&&k(o,l,n[l]);if(h)for(var l of h(n))j.call(n,l)&&k(o,l,n[l]);return o};import{p as P,P as U}from"./index.92898db6.js";import{B as A}from"./index.1a99b8c3.js";import{p as R,m as F}from"./components.b90d3f87.js";import{e as N,f as z,c as I}from"./shared.cba5a5a3.js";import{p as q}from"./en-US.5c76beb1.js";import{_ as E}from"./elevation.7f6c0241.js";import{q as G,r as w,y as O,d as b,o as y,k as p,w as g,a as f,B as T,n as H,l as m,t as C,f as _,A as J,p as K,z as L}from"./vendor.ea41cd30.js";function M(o){return["left","center","right"].includes(o)}const Q=S({show:{type:Boolean,default:!1},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:M},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},onBeforeClose:{type:Function},onConfirm:{type:Function},onCancel:{type:Function},"onUpdate:show":{type:Function}},R(P,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"]));const W=G({name:"VarDialog",components:{VarPopup:U,VarButton:A},inheritAttrs:!1,props:Q,setup(o){const n=w(!1),l=w(!1),e=()=>{var a;return(a=o["onUpdate:show"])==null?void 0:a.call(o,!1)},u=()=>{var B;const{closeOnClickOverlay:a,onClickOverlay:r,onBeforeClose:s}=o;if(r==null||r(),!!a){if(s!=null){s("close",e);return}(B=o["onUpdate:show"])==null||B.call(o,!1)}},t=()=>{var s;const{onBeforeClose:a,onConfirm:r}=o;if(r==null||r(),a!=null){a("confirm",e);return}(s=o["onUpdate:show"])==null||s.call(o,!1)},d=()=>{var s;const{onBeforeClose:a,onCancel:r}=o;if(r==null||r(),a!=null){a("cancel",e);return}(s=o["onUpdate:show"])==null||s.call(o,!1)};return O(()=>o.show,a=>{n.value=a},{immediate:!0}),O(()=>o.closeOnClickOverlay,a=>{if(o.onBeforeClose!=null){l.value=!1;return}l.value=a},{immediate:!0}),{pack:q,dt:N,popupShow:n,popupCloseOnClickOverlay:l,handleClickOverlay:u,confirm:t,cancel:d}}}),X={class:"var-dialog__title"},Y={class:"var-dialog__actions"};function Z(o,n,l,e,u,t){const d=b("var-button"),a=b("var-popup");return y(),p(a,{class:"var-dialog__popup-radius","var-dialog-cover":"",show:o.popupShow,overlay:o.overlay,"overlay-class":o.overlayClass,"overlay-style":o.overlayStyle,"lock-scroll":o.lockScroll,"close-on-click-overlay":o.popupCloseOnClickOverlay,teleport:o.teleport,onOpen:o.onOpen,onClose:o.onClose,onClosed:o.onClosed,onOpened:o.onOpened,onRouteChange:o.onRouteChange,onClickOverlay:o.handleClickOverlay},{default:g(()=>[f("div",J({class:"var--box var-dialog"},o.$attrs),[f("div",X,[T(o.$slots,"title",{},()=>[m(C(o.dt(o.title,o.pack.dialogTitle)),1)])]),f("div",{class:"var-dialog__message",style:H({textAlign:o.messageAlign})},[T(o.$slots,"default",{},()=>[m(C(o.message),1)])],4),f("div",Y,[o.cancelButton?(y(),p(d,{key:0,class:"var-dialog__button var-dialog__cancel-button","var-dialog-cover":"",text:"","text-color":o.cancelButtonTextColor,color:o.cancelButtonColor,onClick:o.cancel},{default:g(()=>[m(C(o.dt(o.cancelButtonText,o.pack.dialogCancelButtonText)),1)]),_:1},8,["text-color","color","onClick"])):_("v-if",!0),o.confirmButton?(y(),p(d,{key:1,class:"var-dialog__button var-dialog__confirm-button","var-dialog-cover":"",text:"","text-color":o.confirmButtonTextColor,color:o.confirmButtonColor,onClick:o.confirm},{default:g(()=>[m(C(o.dt(o.confirmButtonText,o.pack.dialogConfirmButtonText)),1)]),_:1},8,["text-color","color","onClick"])):_("v-if",!0)])],16)]),_:3},8,["show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}var i=E(W,[["render",Z]]);let c;function v(o){return z?new Promise(n=>{v.close();const l=I(o)?{message:o}:o,e=K(l);e.teleport="body",c=e;const{unmountInstance:u}=F(i,e,{onConfirm:()=>{var t;(t=e.onConfirm)==null||t.call(e),n("confirm")},onCancel:()=>{var t;(t=e.onCancel)==null||t.call(e),n("cancel")},onClose:()=>{var t;(t=e.onClose)==null||t.call(e),n("close")},onClosed:()=>{var t;(t=e.onClosed)==null||t.call(e),u(),c===e&&(c=null)},onRouteChange:()=>{u(),c===e&&(c=null)},"onUpdate:show":t=>{e.show=t}});e.show=!0}):Promise.resolve()}i.install=function(o){o.component(i.name,i)};v.install=function(o){o.component(i.name,i)};v.close=()=>{if(c!=null){const o=c;c=null,L().then(()=>{o.show=!1})}};v.Component=i;export{v as D};
